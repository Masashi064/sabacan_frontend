create table public.articles (
  slug text not null,
  video_id text not null,
  title text not null,
  channel_name text null,
  movie_url text null,
  thumbnail_url text null,
  duration text null,
  published_at text null,
  introduction text null,
  category text null,
  tags jsonb null,
  views text null,
  likes text null,
  subtitle_status text null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  constraint articles_pkey primary key (slug)
) TABLESPACE pg_default;

create trigger update_articles_timestamp BEFORE
update on articles for EACH row
execute FUNCTION update_timestamp ();

create table public.captions (
  video_id text not null,
  slug text null,
  vtt_text text null,
  transcript_json jsonb null,
  source text null,
  created_at timestamp with time zone null default now(),
  constraint captions_pkey primary key (video_id),
  constraint captions_slug_key unique (slug)
) TABLESPACE pg_default;

create table public.categories (
  slug text not null,
  video_id text null,
  assigned_category text null,
  assigned_level text null,
  published_date text null,
  created_at timestamp with time zone null default now(),
  thumbnail_url text null,
  channel_name text null,
  video_title text null,
  video_length text null,
  constraint categories_pkey primary key (slug)
) TABLESPACE pg_default;

create table public.quiz (
  video_id text not null,
  slug text not null,
  quiz_json jsonb not null,
  created_at timestamp with time zone null default now(),
  updated_at timestamp with time zone null default now(),
  constraint quiz_pkey primary key (video_id),
  constraint quiz_slug_key unique (slug)
) TABLESPACE pg_default;

create trigger update_quiz_updated_at BEFORE
update on quiz for EACH row
execute FUNCTION update_updated_at_column ();


create table public.vocab (
  id bigint generated always as identity not null,
  video_id text not null,
  slug text not null,
  vocab_json jsonb null,
  created_at timestamp with time zone null default now(),
  constraint vocab_pkey primary key (id)
) TABLESPACE pg_default;